name: Keep star-io awake (main + staff)

on:
  schedule:
    - cron: "*/5 * * * *"   # 5åˆ†ãŠãã«å®Ÿè¡Œ
  workflow_dispatch: {}      # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½

jobs:
  ping:
    runs-on: ubuntu-latest

    steps:
      - name: Ping both star-io endpoints
        run: |
          # ã“ã“ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã„URLã‚’è¿½åŠ 
          URLS=(
            "https://star-io-hc9c.onrender.com"
            "https://star-io-hc9c.onrender.com/staff/update-order-statuses"
          )

          echo "ğŸ” Start pinging at $(date -u)"
          for URL in "${URLS[@]}"; do
            echo "ğŸŒ Pinging $URL ..."
            STATUS=$(curl --max-time 20 --retry 2 --retry-delay 3 -s -o /dev/null -w "%{http_code}" "$URL")
            echo "âœ… Response: HTTP $STATUS"
          done
